<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Backbone.JS Tutorial part 1 &#8211; trenpixster's blog</title>
<meta name="description" content="Trenpixster on dev craftmanship">
<meta name="keywords" content="backbone, javascript, tutorial">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://trenpixster.github.io/images/">
<meta name="twitter:title" content="Backbone.JS Tutorial part 1">
<meta name="twitter:description" content="Trenpixster on dev craftmanship">
<meta name="twitter:creator" content="@trenpixster">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Backbone.JS Tutorial part 1">
<meta property="og:description" content="Trenpixster on dev craftmanship">
<meta property="og:url" content="http://trenpixster.github.io/learning/backbone-tutorial-1/">
<meta property="og:site_name" content="trenpixster's blog">





<link rel="canonical" href="http://trenpixster.github.io/learning/backbone-tutorial-1/">
<link href="http://trenpixster.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="trenpixster's blog Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://trenpixster.github.io/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://trenpixster.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://trenpixster.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://trenpixster.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://trenpixster.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://trenpixster.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://trenpixster.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://trenpixster.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="http://trenpixster.github.io">About</a>
				 
			</li>
	        
			<li>
				
					<a href="http://trenpixster.github.io/articles/">Articles</a>
				 
			</li>
	        
	        <li><a href="http://trenpixster.github.io/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
        <h1 class="site-title animated fadeIn"><a href="http://trenpixster.github.io/">trenpixster's blog</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Trenpixster on dev craftmanship</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://trenpixster.github.io/tags/#backbone" title="Pages tagged backbone">backbone</a>&nbsp;&bull;&nbsp;<a href="http://trenpixster.github.io/tags/#javascript" title="Pages tagged javascript">javascript</a>&nbsp;&bull;&nbsp;<a href="http://trenpixster.github.io/tags/#tutorial" title="Pages tagged tutorial">tutorial</a></span>
        
          <h1 class="entry-title">Backbone.JS Tutorial part 1</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://trenpixster.github.io/images/trenpixster.png" alt="Nizar Venturini photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://trenpixster.github.io/about/" title="About Nizar Venturini">Nizar Venturini</a></span></span>
        <span class="entry-date date published"><time datetime="2014-03-02T22:07:58+00:00"><i class="icon-calendar-empty"></i> March 02, 2014</time></span>
        
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Comment</a></span>
        <span><a href="http://trenpixster.github.io/learning/backbone-tutorial-1/" rel="bookmark" title="Backbone.JS Tutorial part 1"><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <h1 id="introduction">introduction</h1>
<p>This will be a series of posts focusing on <a href="http://backbonejs.org">Backbone.js</a>. It is an event-driven client-side framework that enables today’s web-app developers to deliever responsive dynamic Single Page Applications (SPA).</p>

<p>The examples given will be on the context of a crowd-sourcing site where your visitors can search and populate your database with books. And yes, it will make you millionaire, even if you don’t have a monetization strategy.</p>

<p>Take into account that you have many ways to code the architecture and the logic by which you glue all the components. Always take what you read on the intertubes with a grain of salt ;-)</p>

<h1 id="components">components</h1>

<p>Backbone.js is a sum of several components: Models, <a href="/learning/backbone-tutorial-2">Collections</a>, <a href="/learning/backbone-tutorial-3">Views</a> and Router. On this blog post I’m going to focus on Models.</p>

<h1 id="models">Models </h1>
<p>Models represent the main entities on your web-app. In our case this will be Books. So, a Book could be something like:</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Book</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">urlRoot</span><span class="o">:</span> <span class="s1">&#39;/books&#39;</span><span class="p">,</span>
  <span class="nx">defaults</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">&#39;type&#39;</span><span class="o">:</span><span class="s1">&#39;hardcover&#39;</span>
    <span class="o">%</span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div>

<p>Fuck yeah! You’ve got a Book Model!
Backbone.js gives you off the shelf - pun not intended - some cool stuff you can do.</p>

<p>If you create a new Book:</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">my_book</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Book</span><span class="p">({</span>
  <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;paperback&#39;</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Siddharta&#39;</span><span class="p">,</span>
    <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;Herman Hesse&#39;</span>
<span class="p">});</span>
</code></pre></div>

<p>You’ll have a new Book with the attributes you specified.
You can mess around with the attributes:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">);</span>
<span class="o">&lt;</span> <span class="s1">&#39;Herman Hesse&#39;</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span><span class="s1">&#39;Douglas Adams&#39;</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">);</span>
<span class="o">&lt;</span> <span class="s1">&#39;Douglas Adams&#39;</span>
</code></pre></div>

<p>It is also possibe to set many attributes:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">my_book</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Fahrenheit 451&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;Ray Bradbury&#39;</span><span class="p">});</span>
</code></pre></div>

<p>It is always possible to get the JSON of this model through <code>toJSON()</code>:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">();</span>
<span class="o">&lt;</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Fahrenheit 451&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;Douglas Adams&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;paperback&#39;</span><span class="p">}</span>
</code></pre></div>

<p>So far so good. Now onto the cool stuff. Let’s assume you have an REST API for your books, witch the endpoint is <code>/books</code> (yup, you guessed it, this is where the attribute <code>urlRoot</code> comes in handy!).</p>

<p>Backbone.js gives you three extremely useful methods to interact with your API: <code>save</code>, <code>fetch</code> and <code>destroy</code>.</p>

<h2 id="save">save()</h2>
<p>Following our example, executing:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div>

<p>Will trigger an HTTP POST request to the server’s endpoint <code>/books</code>. This POST will send the JSON representing the attributes in it’s body.</p>

<p>If your API endpoint returns the created model, that should have an <code>id</code>, the model will automatically update itself with the id:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="o">&lt;</span> <span class="mi">1</span>
</code></pre></div>

<p>Subsequent <code>save()</code> requests will trigger a HTTP PUT request to <code>/books/1</code> to update the model:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;number_of_pages&#39;</span><span class="o">:</span><span class="mi">251</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="o">&lt;</span> <span class="mi">1</span>
</code></pre></div>

<p>An alternative would be:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span><span class="s1">&#39;number_of_pages&#39;</span><span class="o">:</span><span class="mi">251</span><span class="p">});</span>
</code></pre></div>

<p>The later format allows you to patch attributes. This means Backbone will only send the specified attributes to the API endpoint instead of the whole model:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span><span class="s1">&#39;number_of_pages&#39;</span><span class="o">:</span><span class="mi">251</span><span class="p">},{</span><span class="nx">patch</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</code></pre></div>

<h2 id="fetch">fetch()</h2>
<p>Fetch triggers a HTTP GET request to the API endpoint for the Book model.</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="nx">my_book</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Book</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="mi">1</span><span class="p">});</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
<span class="o">&lt;</span> <span class="s1">&#39;Fahrenheit 451&#39;</span>
</code></pre></div>

<p>This can be used when in a variety of contexts:
- Need to reflect server side changes on the model
- Get the model when you only have the model <code>id</code> and need to populate the remaining attributes
- Someone hits “Undo” on the webapp
- On a polling mechanism.
##destroy()
Destroy instructs your API to delete a model via a HTTP DELETE request. In our case, this request would be sent to <code>/books/1</code>.</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
</code></pre></div>

<h2 id="callbacks">success and error callbacks</h2>
<p>On all 3 REST requests you can pass a Hash to handle success and error results from the API:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="nx">my_book</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span>
  <span class="p">{</span> <span class="s1">&#39;title&#39;</span> <span class="o">:</span> <span class="s1">&#39;new title&#39;</span> <span class="o">%</span><span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">patch</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Great success!&quot;</span><span class="p">);</span>
        <span class="o">%</span><span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Doh!&quot;</span><span class="p">);</span>
        <span class="o">%</span><span class="p">}</span>
    <span class="o">%</span><span class="p">}</span>
<span class="p">);</span>
</code></pre></div>

<h2 id="events">events</h2>
<p>One of the most awesome things about Backbone.js are events. You have asynchronous signalling of model and collections changes through your app for free.</p>

<p>I’ll dig deeper on this on the post for Backbone.View, but just keep in mind that every time you <code>set</code>, <a href="http://backbonejs.org/#Model-unset"><code>unset</code></a>, <a href="http://backbonejs.org/#Model-clear"><code>clear</code></a>, <code>save</code>, <code>destroy</code> and <code>fetch</code> a model, an event will be triggered. The following events can be triggered: <code>"change"</code>, <code>"request"</code>, <code>"sync"</code>,<code>"destroy"</code> and <code>"invalid"</code>.</p>

<p>It is possible to not trigger this event by specifying you want to be <code>silent</code>:</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span>
<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="nx">bar</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="s1">&#39;shizzle&#39;</span><span class="o">:</span> <span class="s1">&#39;dizzle&#39;</span><span class="p">});</span> <span class="c1">// triggers an event</span>
<span class="o">&gt;</span> <span class="nx">bar</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="s1">&#39;mizzle&#39;</span><span class="o">:</span> <span class="s1">&#39;srizzle&#39;</span><span class="p">},</span> <span class="p">{</span><span class="nx">silent</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span> <span class="c1">//doesn&#39;t trigger an event</span>
</code></pre></div>

<p>And that’s it for <code>Backbone.Model</code>! <a href="http://trenpixster.ghost.io/learning/backbone-tutorial-2/#header">Next post</a> will be about <code>Backbone.Collection</code>, which is a container for <code>Backbone.Model</code>s.</p>

<p>Feel free to leave props or flames in the comment section ;-)</p>

        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://trenpixster.github.io/opinion/hello-world/" class="btn" title="p 'Hello world'">Previous article</a>
      
      
        <a href="http://trenpixster.github.io/tip/the-wonders-of-bind/" class="btn" title="The wonders of .bind()">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Nizar Venturini. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/trenpixster" title="Nizar Venturini on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	
	
	
	
	
	<a href="http://github.com/trenpixster" title="Nizar Venturini on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://trenpixster.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://trenpixster.github.io/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://trenpixster.github.io/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-51169487-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'trenpixster'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
